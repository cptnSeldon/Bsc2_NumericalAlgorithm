<!DOCTYPE html>
<html lang="fr">
<!-- HEAD START -->
<head>
    <meta charset="UTF-8">
    <title>Labo 6 | Equipe 4</title>
    <style>
        body { font-family: 'Calibri', 'Arial', sans-serif; }
        canvas { background-color: #efefef; }
    </style>
</head>
<!-- HEAD END -->
<!-- BODY START -->
<body>
<h2>Labo 6 : </h2>
<!-- JS START -->
<p><input type="button" value="TEST" id="btn"/></p>
<p><canvas height="542" id="myCanvas" width="542"></canvas></p>
<script src="./AN_Labo6_Equipe4.js"></script>
<script>
    // INIT GRAPH
    var myGraph;
    var listS = [];
    var listE = [];
    document.getElementById("btn").addEventListener("click", function(){
        myGraph = new Graph({
            canvasId: 'myCanvas',
            minX: -1.5,
            minY: -1.4,
            maxX: 1.5,
            maxY: 1.4,
            unitsPerTick: 0.5
        });
        for(var i=0; i<1; i=i+0.1)
            eulersMethod(cooling, -1.5, -1.4, 1.5, i);

        myGraph.drawLine(listS, listE, 'red', 2);

    });

    /**
     * Euler's Method
     *
     * https://rosettacode.org/wiki/Euler_method#JavaScript
     *
     * @param f     : differential-equation
     * @param t1    : initial condition
     * @param y1    : initial condition
     * @param t2    : ending
     * @param h     : steps
     * @returns {*}
     */
    function eulersMethod(f, t1, y1, t2, h) {
        // Header
//        console.log("\tT\t|\tY\t");
//        console.log("------------------------------------");

        // Initial Variables
        var t=t1, y=y1;


        // While we're not done yet
        // Both sides of the OR let you do Euler's Method backwards
        while ((t<t2 && t1<t2) || (t>t2 && t1>t2)) {
            // Print what we have
//            console.log("\t" + t + "\t|\t" + y);

            var start = {x: t, y:y};
            listS.push(start);

            // Calculate the next values
            y += h*f(t, y)
            t += h;

            var end = {x: t, y:y};


            listE.push(end);


            // Calculate the next values
            y += 0.1*f(t, y)
            t += 0.1;
        }

        return y;
    }

    function cooling(t, y) {
        return Math.pow(t, 2) + Math.pow(y, 2);
    }



</script>
<!-- JS END -->
</body>
<!-- BODY END -->
</html>