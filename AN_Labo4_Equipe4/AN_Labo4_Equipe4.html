<!DOCTYPE html>
<html lang="fr">
<!-- HEAD START -->
<head>
    <meta charset="UTF-8">
    <title>Labo 4 | Equipe 4</title>
    <style>
        body { font-family: 'Calibri', 'Arial', sans-serif; }
    </style>
    <script type="text/javascript" async
            src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=MML_CHTML">
    </script>
</head>
<!-- HEAD END -->
<!-- BODY START -->
<body>
<h2>Labo 4 : Dérivation numérique</h2>
<h3>Introduction</h3>
<p>
    Le but de cette application est de représenter la fonction <span style="color: green;">cosinus</span> en utilisant sa série
    de Taylor (ci-dessous), ainsi que d'afficher sa <span style="color: blue;">dérivée</span> et sa <span style="color: red;">dérivée seconde</span>.
</p>
<p>
<!-- math. notation -->
<!-- link mathml  : http://www.wiris.com/editor/demo/en/mathml-latex.html -->
<!-- link mathjax : http://docs.mathjax.org/en/latest/start.html -->
    <math xmlns="http://www.w3.org/1998/Math/MathML">
        <mi>cos</mi>
        <mfenced>
            <mi>x</mi>
        </mfenced>
        <mo>&#x000A0;</mo>
        <mo>=</mo>
        <mo>&#x000A0;</mo>
        <munderover>
            <mo>&#x02211;</mo>
            <mrow>
                <mi>n</mi>
                <mo>&#x000A0;</mo>
                <mo>=</mo>
                <mo>&#x000A0;</mo>
                <mn>0</mn>
            </mrow>
                <mo>&#x0221E;</mo>
        </munderover>
        <mfrac>
            <mrow>
                <mo>(</mo>
                <mo>-</mo>
                <mn>1</mn>
                <msup>
                    <mo>)</mo>
                    <mi>n</mi>
                </msup>
                <mo>&#x000A0;</mo>
                <msup>
                    <mi>x</mi>
                    <mrow>
                        <mn>2</mn>
                        <mi>n</mi>
                    </mrow>
                </msup>
            </mrow>
            <mrow>
                <mn>2</mn>
                <mi>n</mi>
                <mo>!</mo>
            </mrow>
        </mfrac>
    </math>
</p>
<p>
    Le calcul de la <span style="color: blue;">dérivée</span> nous permet de savoir quelle est la pente de la tangente passant par un point x de la courbe.
    La formule (ci-dessous) qui est utilisée dans cette application est celle utilisant la différence centrée. Le taux d'erreur est de
    <math xmlns="http://www.w3.org/1998/Math/MathML"><mi>O</mi><mfenced><msup><mi>h</mi><mn>2</mn></msup></mfenced></math> dans ce cas-ci.
<p/>
<p>
    <math xmlns="http://www.w3.org/1998/Math/MathML">
        <mi>f</mi>
        <mo>'</mo>
        <mfenced>
            <mi>x</mi>
        </mfenced>
        <mo>&#x000A0;</mo>
        <mo>=</mo>
        <mo>&#x000A0;</mo>
        <mfrac>
            <mrow>
                <mi>f</mi>
                <mfenced>
                    <mrow>
                        <mi>x</mi>
                        <mo>+</mo>
                        <mi>h</mi>
                    </mrow>
                </mfenced>
                <mo>&#x000A0;</mo>
                <mo>&#x000A0;</mo>
                <mo>-</mo>
                <mo>&#x000A0;</mo>
                <mi>f</mi>
                <mo>(</mo>
                <mi>x</mi>
                <mo>-</mo>
                <mi>h</mi>
                <mo>)</mo>
            </mrow>
            <mrow>
                <mn>2</mn>
                <mi>h</mi>
            </mrow>
        </mfrac>
    </math>
</p>
<p>
    Grâce à la <span style="color: red;">dérivée seconde</span>, on arrive à obtenir des informations quant à la variation de la pente à un endroit donnée. Si sa valeur est
    positive, on dit que la courbe est <i>convexe</i> (pente qui monte); si elle est négative, la courbe est dite <i>concave</i> (pente qui descend); si par contre elle vaut 0,
    on a un point d'inflexion (pente nulle). Et c'est bien ce qui est illustré par nos trois courbes.
</p>
<h3>Mode d'emploi</h3>
<p>
    L'application permet de visualiser les <span style="color: blue;">dérivée</span> et <span style="color: red;">dérivée seconde</span>,
    ainsi que de manipuler les valeurs pour x, h et n :
<ul>
    <dl>
        <dt><strong>x</strong></dt>
        <dd>Valeur se trouvant sur l'abcscisse.</dd>
        <dt><strong>h</strong></dt>
        <dd>Valeur qui, lorsqu'on tend vers 0, permet de s'approcher de plus en plus près de la pente
            de la tangente par rapport à <span style="color: green;">f</span>.</dd>
        <dt><strong>n</strong></dt>
        <dd>Représente le nombre d'itération pour la fonction cosinus.</dd>
    </dl>
</ul>
L'application permet d'afficher les courbes ainsi que la pente en x de manière séparée, ainsi que de
vider le graphe histoire de permettre une meilleure visibilité.
</p>
<h3>Application</h3>
<!-- Contenu -->
<p>
    <label for="variable_x">x : <input type="number" name="variable_x" id="variable_x" value="1" step="0.01"> </label>
    <label for="variable_h">h : <input type="number" name="variable_h" id="variable_h" value="1" step="0.01"> </label>
    <label for="variable_n">n : <input type="number" name="variable_n" id="variable_n" value="50" step="1"></label>
</p>

<canvas id="myCanvas" width="600" height="300"></canvas>
<p>
    <input type="button" name="show_f" id="show_f" value="Afficher f"/>
    <input type="button" name="show_f_1" id="show_f_1" value="Afficher f'"/>
    <input type="button" name="show_f_2" id="show_f_2" value="Afficher f''"/>
    <input type="button" name="reset" id="reset" value="Vider graphe"/>
</p>
<p>
    <input type="button" name="slope" id="show_slope" value="Pente en X"/>
    <label id="slope_value"></label>
</p>

<!-- JS START -->
<script src="./AN_Labo4_Equipe4.js"></script>
<script>
    // INIT GRAPH
    var myGraph = new Graph({
        canvasId: 'myCanvas',
        minX: -10,
        minY: -5,
        maxX: 10,
        maxY: 5,
        unitsPerTick: 1
    });

    /**
     *  Listener button reset
     *   - Clear the graph
     */
    document.getElementById("reset").addEventListener("click", function () {
        myGraph.clearGraph();
    });

    document.getElementById("show_slope").addEventListener("click", function () {
        var x = parseFloat(document.getElementById("variable_x").value);
        var h = parseFloat(document.getElementById("variable_h").value);

        document.getElementById("slope_value").innerHTML = (Derivative_prime(x)).toFixed(2);

        myGraph.drawSlope(function(x) {
            return cosine(x);
        }, (x-h), (x+h), 'black', 2);
    });

    /**
     * Listener button show_f
     *  - DRAW EQUATION : cosine
     */
    document.getElementById("show_f").addEventListener("click", function () {
        myGraph.drawEquation(function(x) {
            return cosine(x);
        }, 'green', 2);
    });

    /**
     * Listener button show_f_1
     *  - DRAW EQUATION : f'
     */
    document.getElementById("show_f_1").addEventListener("click", function () {
        myGraph.drawEquation(function(x) {
            return Derivative_prime(x);
        }, 'blue', 2);
    });

    /**
     * Listener button show_f_2
     *  - DRAW EQUATION : f''
     */
    document.getElementById("show_f_2").addEventListener("click", function () {
        myGraph.drawEquation(function(x) {
            return Derivative_sec(x);
        }, 'red', 2);
    });


    //FACTORIAL
    function factorial(n){

        if(n === 0)
            return 1;

        return n * factorial(n - 1);
    }

    //COSINE TAYLOR
    function cos_taylor(x,n){
        return (Math.pow(-1.0,n)*Math.pow(x,2.0*n))/factorial(2.0*n);
    }

    //COSINE
    function cosine(x){
        var nMax = parseInt(document.getElementById("variable_n").value);

        var cos = 0;
        //cosine : Taylor
        for(var n = 0; n < nMax; n++){
            cos += cos_taylor(x,n);
        }

        return cos;
    }

    //DERIVATIVE
    function Derivative_prime(x){
        var h = parseFloat(document.getElementById("variable_h").value);
        var f = 1.0;
        f = (cosine(x + h) - cosine(x - h))/2.0*h;
        return f;
    }
    //DERIVATIVE
    function Derivative_sec(x){
        var h = parseFloat(document.getElementById("variable_h").value);
        var f = 1.0;
        f = (Derivative_prime(x + h) - Derivative_prime(x - h))/2.0*h;
        return f;
    }

    /*//DERIVATIVE : slope
    function Derivative_prime_slope(x, a, b){
        return (a * x) + b;
    }*/
    
</script>
<!-- JS END -->
<h3>Commentaires</h3>
<p>
    L'affichage de la pente n'est pas optimale, surtout si h tend vers 0 (la droite se confond avec la courbe).
    Les courbes de dérivées ne sont pas exactes non plus, notamment à cause des erreurs qui s'accumulent au fur et à mesure,
    elles n'arrivent pas à atteindre les plafonds à 1 et -1 (sauf si h vaut 1.1 approximativement).
</p>
</body>
<!-- BODY END -->
</html>